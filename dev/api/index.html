<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Public API · NMRSignalSimulator.jl</title><meta name="title" content="Public API · NMRSignalSimulator.jl"/><meta property="og:title" content="Public API · NMRSignalSimulator.jl"/><meta property="twitter:title" content="Public API · NMRSignalSimulator.jl"/><meta name="description" content="Documentation for NMRSignalSimulator.jl."/><meta property="og:description" content="Documentation for NMRSignalSimulator.jl."/><meta property="twitter:description" content="Documentation for NMRSignalSimulator.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">NMRSignalSimulator.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Overview</a></li><li class="is-active"><a class="tocitem" href>Public API</a><ul class="internal"><li><a class="tocitem" href="#Surrogate"><span>Surrogate</span></a></li><li><a class="tocitem" href="#Constructors"><span>Constructors</span></a></li><li><a class="tocitem" href="#Model-updates"><span>Model updates</span></a></li><li><a class="tocitem" href="#Subset-vars"><span>Subset vars</span></a></li><li><a class="tocitem" href="#Parameter-range"><span>Parameter range</span></a></li><li><a class="tocitem" href="#Utilies"><span>Utilies</span></a></li><li><a class="tocitem" href="#Serialize/Deserialize"><span>Serialize/Deserialize</span></a></li></ul></li><li><a class="tocitem" href="../demo_code/">Demo: code walk-through</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Public API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Public API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Function-References"><a class="docs-heading-anchor" href="#Function-References">Function References</a><a id="Function-References-1"></a><a class="docs-heading-anchor-permalink" href="#Function-References" title="Permalink"></a></h1><h2 id="Surrogate"><a class="docs-heading-anchor" href="#Surrogate">Surrogate</a><a id="Surrogate-1"></a><a class="docs-heading-anchor-permalink" href="#Surrogate" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.CLSurrogateConfig" href="#NMRSignalSimulator.CLSurrogateConfig"><code>NMRSignalSimulator.CLSurrogateConfig</code></a> — <span class="docstring-category">Type</span></header><section><div><p>struct CLSurrogateConfig{T}     Δr::T = convert(T, 1.0)     Δκ<em>λ::T = convert(T, 0.05)     Δcs</em>max<em>scalar::T = convert(T, 0.2)     κ</em>λ<em>lb::T = convert(T, 0.5)     κ</em>λ_ub::T = convert(T, 2.5)</p><pre><code class="nohighlight hljs">default_ppm_padding::T = convert(T , 0.5)</code></pre><p>end</p><ul><li><p><code>default_ppm_padding</code> – </p></li><li><p><code>κ_λ_lb</code>, <code>κ_λ_ub</code> – the default lower and upper bounds, respectively, for the κ_λ input of the surrogate.</p></li><li><p><code>Δcs_max_scalar</code>, <code>default_ppm_padding</code> – specifies the surrogate&#39;s default frequency operating range, [u<em>min - delta</em>u, u<em>max + delta</em>u], where delta<em>u is Δcs</em>max_scalar expressed in Hz.</p></li></ul><p>u<em>min, u</em>max are in Hz, Δcs<em>max</em>scalar is in ppm. <code>u_min</code> is set to the smallest resonance frequency from <code>As</code>, and <code>u_max</code> is set to the largest resonance frequency from <code>As</code>. <code>Δcs_max_scalar</code> is in units of ppm. It is the border that is added to u<em>min and u</em>max (once they are converted to ppm) to get the final frequency interval for which the surrogate of a spin system is fitted to. The extrapolation of the surrogate for frequency queries outisde this interval is set to return zero, so the surrogate is the zero signal outside this interval for that spin system.</p><ul><li><code>Δr</code>, <code>Δκ_λ</code> – the sampling increment for the frequency input r and T2 multiplier input κ_λ for generating samples to fit the surrogate. Smaller means the surrogate is more accurate, but slower to construct the surrogate.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/types.jl#L49-L69">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.fitclproxies" href="#NMRSignalSimulator.fitclproxies"><code>NMRSignalSimulator.fitclproxies</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">fitclproxies(
    As::Vector{HAM.SHType{T}},
    λ0::T,
    config::CLSurrogateConfig{T};
    names::Vector{String} = Vector{String}(undef, 0),
    ) where T &lt;: AbstractFloat</code></pre><p>Create surrogate for NMR spectrum, given the simulated resonance comopnent results from NMRHamiltonian.</p><p>Inputs:</p><ul><li><p><code>As</code> – a 1-D array of compound resonance simulations. See <code>NMRHamiltonian.simulate</code>.</p></li><li><p><code>λ0</code> – the estimated T2* decay for the 0 ppm resonance component.</p></li><li><p><code>config</code> – the configuration for building the surrogate. See <code>CLSurrogateConfig</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/core/engine.jl#L2-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.evalclmixture" href="#NMRSignalSimulator.evalclmixture"><code>NMRSignalSimulator.evalclmixture</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function evalclmixture(
    u_rad,
    As::Vector{HAM.SHType{T}},
    Bs::Vector{MoleculeType{T,SST,CLOperationRange{T}}};
    w::Vector{T} = ones(T, length(As)),
)::Complex{T} where {T &lt;: Real, SST}</code></pre><p>Evaluates the preliminary model at radial frequency (in radians) <code>u_rad</code>. Inputs:</p><ul><li><code>Bs</code> is the surrogate model.</li><li><code>As</code> is the resonance component data structure.</li><li><code>w</code> is relative concentration of each compound entry.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/core/query/lorentzian.jl#L13-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.evalclproxymixture" href="#NMRSignalSimulator.evalclproxymixture"><code>NMRSignalSimulator.evalclproxymixture</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function evalclproxymixture(
    u_rad,
    As::Vector{HAM.SHType{T}},
    Bs::Vector{MoleculeType{T,SST,CLOperationRange{T}}};
    w::Vector{T} = ones(T, length(As)),
)::Complex{T} where {T &lt;: Real,SST}</code></pre><p>Evaluates the surrogate model at radial frequency (in radians) <code>u_rad</code>. Inputs:</p><ul><li><code>Bs</code> is the surrogate model.</li><li><code>As</code> is the resonance component data structure.</li><li><code>w</code> is relative concentration of each compound entry.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/core/query/proxy.jl#L29-L45">source</a></section></article><h2 id="Constructors"><a class="docs-heading-anchor" href="#Constructors">Constructors</a><a id="Constructors-1"></a><a class="docs-heading-anchor-permalink" href="#Constructors" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.getSpinSysParamsdatatype" href="#NMRSignalSimulator.getSpinSysParamsdatatype"><code>NMRSignalSimulator.getSpinSysParamsdatatype</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function getSpinSysParamsdatatype(
    ::Type{CoherenceShift{T}}
    )::DataType where T &lt;: AbstractFloat</code></pre><p>Convinence constructor for SpinSysParams{CoherenceShift{T}, CoherencePhase{T}, SharedT2{T}}</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/types.jl#L354-L362">source</a></section><section><div><pre><code class="language-julia hljs">function getSpinSysParamsdatatype(
    ::Type{SharedShift{T}}
    )::DataType where T &lt;: AbstractFloat</code></pre><p>Convinence constructor for SpinSysParams{SharedShift{T}, CoherencePhase{T}, SharedT2{T}}</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/types.jl#L370-L378">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.MixtureModelParameters" href="#NMRSignalSimulator.MixtureModelParameters"><code>NMRSignalSimulator.MixtureModelParameters</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">function MixtureModelParameters(
    MSS::CLMixtureSpinSys{T,ST,PT,T2T};
    w = ones(T, getNentries(MS)),
) where {T,ST,PT,T2T}</code></pre><p>Convinence constructor for <code>MixtureModelParameters()</code>. Does not create a copy of of the inputs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameter_types.jl#L140-L149">source</a></section></article><h2 id="Model-updates"><a class="docs-heading-anchor" href="#Model-updates">Model updates</a><a id="Model-updates-1"></a><a class="docs-heading-anchor-permalink" href="#Model-updates" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.importmodel!" href="#NMRSignalSimulator.importmodel!"><code>NMRSignalSimulator.importmodel!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function importmodel!(p::MixtureModelParameters)::Nothing</code></pre><p>Updates <code>p.MSS</code> with the contents of <code>p.var_flat</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameters/models.jl#L4-L10">source</a></section><section><div><pre><code class="language-julia hljs">function importmodel!(p::MixtureModelParameters, x, inds::SubsetVarsIndices)::Nothing</code></pre><p>Only update the entries as specified by inds.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameters/models.jl#L21-L27">source</a></section><section><div><pre><code class="language-julia hljs">function importmodel!(p::MixtureModelParameters, x, ::AllVars)::Nothing</code></pre><p>Calls importmodel!(p, x).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameters/models.jl#L71-L77">source</a></section><section><div><pre><code class="language-julia hljs">function importmodel!(p::MixtureModelParameters, x)::Nothing</code></pre><p>Update the model <code>p</code> using the contents of <code>x</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameters/models.jl#L82-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.importmodelreset!" href="#NMRSignalSimulator.importmodelreset!"><code>NMRSignalSimulator.importmodelreset!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function importmodelreset!(p::MixtureModelParameters, x, inds::SubsetVarsIndices)::Nothing</code></pre><p>This is a version of <code>importmodel!(p::MixtureModelParameters, x, inds::SubsetVarsIndices)::Nothing</code> that resets the other variables not mentioned in <code>inds</code>.</p><p>First, resets the model to default parameter values; 0 for shift and phase parameters, 1 for T2 multiplier parameters. Then update the model parameters as specified by inds with the entries in x.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameters/models.jl#L50-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.exportmodel!" href="#NMRSignalSimulator.exportmodel!"><code>NMRSignalSimulator.exportmodel!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function exportmodel!(p::MixtureModelParameters)::Nothing</code></pre><p>Flattens the model parameters into <code>p.var_flat</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameters/models.jl#L108-L114">source</a></section></article><h2 id="Subset-vars"><a class="docs-heading-anchor" href="#Subset-vars">Subset vars</a><a id="Subset-vars-1"></a><a class="docs-heading-anchor-permalink" href="#Subset-vars" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.VariableSetTrait" href="#NMRSignalSimulator.VariableSetTrait"><code>NMRSignalSimulator.VariableSetTrait</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type VariableSetTrait end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/subset_types.jl#L31-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.AllVars" href="#NMRSignalSimulator.AllVars"><code>NMRSignalSimulator.AllVars</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct AllVars &lt;: VariableSetTrait end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/subset_types.jl#L38-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.SubsetVars" href="#NMRSignalSimulator.SubsetVars"><code>NMRSignalSimulator.SubsetVars</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct SubsetVars &lt;: VariableSetTrait
    indices::SubsetVarsIndices
    active_systems::Vector{Tuple{Int,Int}}</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/subset_types.jl#L49-L55">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.SubsetVarsIndices" href="#NMRSignalSimulator.SubsetVarsIndices"><code>NMRSignalSimulator.SubsetVarsIndices</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct SubsetVarsIndices
    shift::Vector{Int}
    phase::Vector{Int}
    T2::Vector{Int}</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/subset_types.jl#L5-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.exportindices" href="#NMRSignalSimulator.exportindices"><code>NMRSignalSimulator.exportindices</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function exportindices(A::SubsetVarsIndices)::Vector{Int}</code></pre><pre><code class="nohighlight hljs">Returns [A.shift; A.phase; A.T2]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/subset_types.jl#L19-L24">source</a></section><section><div><p><code>function exportindices(A::SubsetVars)::Vector{Int}</code>     Returns index in A.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/subset_types.jl#L61-L64">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.setupsubsetvars" href="#NMRSignalSimulator.setupsubsetvars"><code>NMRSignalSimulator.setupsubsetvars</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function setupsubsetvars(
    indicies_input::Vector{Int},
    mapping::ParamsMapping;
)::SubsetVars</code></pre><p>Convinence constructor for <code>SubsetVars</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/subset_types.jl#L105-L114">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.getindices" href="#NMRSignalSimulator.getindices"><code>NMRSignalSimulator.getindices</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>function getindices(A::AllVars)::AllVars</code>     returns A.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/subset_types.jl#L69-L72">source</a></section><section><div><p><code>function getindices(A::SubsetVars)::SubsetVarsIndices</code>     returns A.indices.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/subset_types.jl#L77-L80">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.getactivesystems" href="#NMRSignalSimulator.getactivesystems"><code>NMRSignalSimulator.getactivesystems</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>function getactivesystems(A::AllVars)::AllVars</code>     returns A.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/subset_types.jl#L85-L88">source</a></section><section><div><p><code>function getactivesystems(A::SubsetVars)::Vector{Tuple{Int,Int}}</code>     returns A.active_systems.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/subset_types.jl#L93-L96">source</a></section></article><h2 id="Parameter-range"><a class="docs-heading-anchor" href="#Parameter-range">Parameter range</a><a id="Parameter-range-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-range" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.CLOperationRange" href="#NMRSignalSimulator.CLOperationRange"><code>NMRSignalSimulator.CLOperationRange</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct CLOperationRange{T}
    u_min::T # in Hz.
    u_max::T # in Hz.
    
    # d_max = ppm2hzfunc.(Δcs_max) .- ppm2hzfunc(zero(T))
    d_max::Vector{T} # in Hz. ζ is in rad.

    κ_λ_lb::T
    κ_λ_ub::T
    Δr::T
    Δκ_λ::T
end</code></pre><p>Operation range for the spline surrogate q(r,λ) of a resonance group. Bounds on <code>r</code> for groups in the <code>i</code>-th spin system:</p><pre><code class="nohighlight hljs">r_min = 2*π*(u_min - d_max[i])
r_max = 2*π*(u_max + d_max[i])</code></pre><p>Lower and upper bounds on <code>λ</code> are <code>κ_λ_lb</code> and <code>κ_λ_ub</code>, respectively. Able to serialize/deserialize.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/types.jl#L91-L114">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.fetchbounds" href="#NMRSignalSimulator.fetchbounds"><code>NMRSignalSimulator.fetchbounds</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function fetchbounds(
    p::MixtureModelParameters,
    Bs::Vector{MoleculeType{T, SST, OT}};
    shift_proportion = 0.9, # between 0 to 1. Control the returned shift bounds as a proportion of the maximum allowed shift bounds used when the surrogates were created.
    phase_lb = convert(T, -π),
    phase_ub = convert(T, π),
)::Tuple{Vector{T},Vector{T}} where {T,SST,OT}</code></pre><p>Returns a <code>Vector</code> for lower bound and <code>Vector</code> for upper bound for each parameter variable. The order (first elements to last elements) of the returned vectors are: Shift (ζ), phase (κ<em>β), then T2 (κ</em>λ) parameters.</p><p>Input:</p><ul><li><p><code>p</code> – model parameters. Used to determine the size of the output.</p></li><li><p><code>Bs</code> – Surrogate model. This function uses the <code>CLOperationRange</code> field from each element of <code>Bs</code>.</p></li></ul><p>Optional inputs:</p><ul><li><p><code>shift_proportion</code> – between 0 to 1. Control the returned shift bounds as a proportion of the maximum allowed shift bounds used when the surrogates were created.</p></li><li><p><code>phase_lb</code> – the fill value for the lower bound of phase parameter (κ_β).</p></li><li><p><code>phase_ub</code> – the fill value for the lower bound of phase parameter (κ_β).</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/utils.jl#L36-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.MoleculeParamsMapping" href="#NMRSignalSimulator.MoleculeParamsMapping"><code>NMRSignalSimulator.MoleculeParamsMapping</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct MoleculeParamsMapping
    st::Vector{Vector{Int}}
    fin::Vector{Vector{Int}}
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameter_types.jl#L57-L64">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.ParamsMapping" href="#NMRSignalSimulator.ParamsMapping"><code>NMRSignalSimulator.ParamsMapping</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct ParamsMapping
    shift::MoleculeParamsMapping
    phase::MoleculeParamsMapping
    T2::MoleculeParamsMapping
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameter_types.jl#L74-L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.getshiftrange" href="#NMRSignalSimulator.getshiftrange"><code>NMRSignalSimulator.getshiftrange</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function getshiftrange(A::ParamsMapping)</code></pre><p>Returns the range for the shift parameters (ζ).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameter_types.jl#L89-L95">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.getphaserange" href="#NMRSignalSimulator.getphaserange"><code>NMRSignalSimulator.getphaserange</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function getphaserange(A::ParamsMapping)</code></pre><p>Returns the range for the phase parameters (κ_β).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameter_types.jl#L100-L106">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.getT2range" href="#NMRSignalSimulator.getT2range"><code>NMRSignalSimulator.getT2range</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function getT2range(A::ParamsMapping)</code></pre><p>Returns the range for the T2 parameters (κ_λ).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameter_types.jl#L111-L117">source</a></section></article><h2 id="Utilies"><a class="docs-heading-anchor" href="#Utilies">Utilies</a><a id="Utilies-1"></a><a class="docs-heading-anchor-permalink" href="#Utilies" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.getNentries" href="#NMRSignalSimulator.getNentries"><code>NMRSignalSimulator.getNentries</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function getNentries(MSS::CLMixtureSpinSys)::Int</code></pre><p>Returns the number of molecule entries associated with <code>MSS</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameter_types.jl#L428-L434">source</a></section><section><div><pre><code class="language-julia hljs">function getNentries(model_params::MixtureModelParameters)::Int</code></pre><p>Return the number of molecule entries associated with <code>model_params</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/parameter_types.jl#L440-L446">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.exportphysicalparams" href="#NMRSignalSimulator.exportphysicalparams"><code>NMRSignalSimulator.exportphysicalparams</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">exportphysicalparams(
    MSS::CLMixtureSpinSys,
    Phys::Vector{HAM.PhysicalParamsType{T}}, # template.
    fs::T,
    SW::T,
    ν_0ppm::T,
) where T</code></pre><p>Outputs: out<em>shift, out</em>phase, out_T2.</p><p>The fields <code>cs_sys</code> and <code>cs_singlets</code> for <code>out_shift</code>, <code>out_phase</code>, and <code>out_T2</code> does not contain chemical shift. It contains the shift difference (in ppm), phase variable κ_β (in radians), and the T2 variable ξ (a multiplier, dimensionless), respectively.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/analysis.jl#L178-L192">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.createtablecolumns" href="#NMRSignalSimulator.createtablecolumns"><code>NMRSignalSimulator.createtablecolumns</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function createtablecolumns(Phys::Vector{NMRHamiltonian.PhysicalParamsType{T}})::Tuple{Vector{Vector{Int}},Vector{Tuple{Int,Int}},Vector{T}} where T</code></pre><p>Extract information from <code>Phys</code> to produce three 1-D arrays that is useful for constructing tables for visualization purposes.</p><p>Outputs:</p><ul><li><p><code>nucleus_ID_set</code> – nucleus ID numbers, as recorded from <code>Phys[n].H_IDs</code>, i.e., the original not the re-labelled IDs.</p></li><li><p><code>location_set</code> – pairs of the format <code>(n,i)</code>, <code>n</code> is the compound entry index, <code>i</code> is the spin system index.</p></li><li><p><code>cs_set</code> – chemical shift numbers for each nucleus, in units ppm.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/analysis.jl#L57-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.ζ2Δcs" href="#NMRSignalSimulator.ζ2Δcs"><code>NMRSignalSimulator.ζ2Δcs</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function ζ2Δcs(ζ::T, ν_0ppm::T, hz2ppmfunc)::T where T</code></pre><p>Convert radial frequency to ppm. &#39;&#39;&#39;</p><p><strong># test.</strong></p><p>a = Δcs2ζ(0.1, ppm2hzfunc) @show ζ2Δcs(a, ν_0ppm, hz2ppmfunc) &#39;&#39;&#39;</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/utils.jl#L19-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.Δcs2ζ" href="#NMRSignalSimulator.Δcs2ζ"><code>NMRSignalSimulator.Δcs2ζ</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function Δcs2ζ(Δcs::T, ppm2hzfunc)::T where T</code></pre><p>Convert ppm to radial frequency. &#39;&#39;&#39;</p><p><strong># test.</strong></p><p>a = Δcs2ζ(0.1, ppm2hzfunc) @show ζ2Δcs(a, ν_0ppm, hz2ppmfunc) &#39;&#39;&#39;</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/utils.jl#L2-L13">source</a></section></article><h2 id="Serialize/Deserialize"><a class="docs-heading-anchor" href="#Serialize/Deserialize">Serialize/Deserialize</a><a id="Serialize/Deserialize-1"></a><a class="docs-heading-anchor-permalink" href="#Serialize/Deserialize" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.serializclproxies" href="#NMRSignalSimulator.serializclproxies"><code>NMRSignalSimulator.serializclproxies</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function serializclproxies(
    Bs::Vector{MoleculeType{T,SpinSysParams{ST,PT,T2T},OT}},
) where {T,ST,PT,T2T,OT}</code></pre><pre><code class="nohighlight hljs">Returns a dictionary containing the surrogate model.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/serialize.jl#L141-L149">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.serializitpsamples" href="#NMRSignalSimulator.serializitpsamples"><code>NMRSignalSimulator.serializitpsamples</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function serializitpsamples(
    itp_samps_set::Vector{Vector{InterpolationSamples{T}}},
) where T</code></pre><p>Returns a dictionary of the interpolation samples used to fit the surrogate.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/serialize.jl#L221-L229">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.deserializclproxies" href="#NMRSignalSimulator.deserializclproxies"><code>NMRSignalSimulator.deserializclproxies</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function deserializclproxies(W)</code></pre><p>W is of a data type that can be addressed via a key (of type Symbol) and returns a blue. Examples: type Dict{Symbol, Any} or JSON.Object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/serialize.jl#L190-L197">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.deserializitpsamples" href="#NMRSignalSimulator.deserializitpsamples"><code>NMRSignalSimulator.deserializitpsamples</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function deserializitpsamples(W)</code></pre><p>W is of a data type that can be addressed via a key (of type <code>Symbol</code>). Examples: type <code>Dict{Symbol, Any}</code> or <code>JSON.Object</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/serialize.jl#L252-L259">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NMRSignalSimulator.recoverclproxies" href="#NMRSignalSimulator.recoverclproxies"><code>NMRSignalSimulator.recoverclproxies</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function recoverclproxies(
    itp_samps_set::Vector{Vector{InterpolationSamples{T}}},
    ss_params_set::Vector{SpinSysParams{ST,PT,T2T}},
    op_range_set::Vector{CLOperationRange{T}},
    As::Vector{HAM.SHType{T}},
    λ0::T,
    )::Tuple{Vector{MoleculeType{T,SpinSysParams{ST,PT,T2T},CLOperationRange{T}}},
    CLMixtureSpinSys{T,ST,PT,T2T}} where {T,ST,PT,T2T}</code></pre><p>Takes in deserialized quantities to output a surrogate model and its corresponding mixture spin system data structure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AI4DBiological-Systems/NMRSignalSimulator.jl/blob/4fcaec53abceac39b17169dcc4692b0e133ce76e/src/core/IO.jl#L1-L14">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Overview</a><a class="docs-footer-nextpage" href="../demo_code/">Demo: code walk-through »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.2 on <span class="colophon-date" title="Tuesday 14 November 2023 22:11">Tuesday 14 November 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
